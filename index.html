<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine Surprise</title>
    <style>
        /* Gaya Dasar & Background Polkadot */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #ff9a9e; 
            background-image: 
                radial-gradient(rgba(255, 255, 255, 0.3) 15%, transparent 16%),
                radial-gradient(rgba(255, 255, 255, 0.3) 15%, transparent 16%),
                linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #ffecd2 100%);
            background-size: 40px 40px, 40px 40px, 100% 100%;
            background-position: 0 0, 20px 20px, 0 0;
            background-attachment: fixed;
            color: #333;
            text-align: center;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px 100px 20px;
            position: relative;
            z-index: 10;
        }

        .page-card {
            background: rgba(255, 255, 255, 0.4);
            padding: 30px;
            border-radius: 25px;
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(233, 30, 99, 0.1);
            margin-bottom: 20px;
        }

        h1, h2 { color: #e91e63; }

        /* --- ANIMASI TEKS MASUK --- */
        .animate-text {
            opacity: 0;
            transform: translateY(30px);
            animation: textAppear 1.5s ease-out forwards;
        }

        @keyframes textAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        input[type="text"] {
            padding: 12px; font-size: 18px; border: 2px solid #e91e63;
            border-radius: 12px; width: 80%; max-width: 300px; margin: 20px 0;
            outline: none;
            background: rgba(255, 255, 255, 0.8);
        }

        button {
            background-color: #e91e63; color: white; border: none;
            padding: 12px 30px; font-size: 18px; border-radius: 15px;
            cursor: pointer; margin: 10px; transition: 0.3s;
            box-shadow: 0 4px 15px rgba(233, 30, 99, 0.3);
        }

        button:hover { background-color: #c2185b; transform: scale(1.05); }
        .hidden { display: none; }

        /* Gallery Lebar */
        .gallery {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 25px;
            margin: 30px auto;
            max-width: 100%;
        }

        .photo-item {
            background: white;
            padding: 12px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            width: 250px;
            transition: 0.5s ease;
            animation: popUp 0.6s ease-out;
        }

        @keyframes popUp {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .photo-item img {
            width: 100%;
            height: 333px;
            object-fit: cover;
            border-radius: 10px;
        }

        .photo-desc {
            font-size: 14px;
            color: #e91e63;
            margin-top: 12px;
            font-weight: bold;
            line-height: 1.4;
        }

        .message-box {
            background: rgba(255, 255, 255, 0.7);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            margin: 20px auto;
            max-width: 600px;
            line-height: 1.8;
            font-size: 18px;
            color: #d81b60;
            font-style: italic;
        }

        .bear-container { margin: 25px 0; }
        .cute-bear, .gif-intro { 
            width: 280px; 
            height: auto; 
            border-radius: 15px; 
        }

        /* --- PERBAIKAN FRAME FINAL --- */
        .final-frame {
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 400px; /* Ukuran frame yang pas untuk barcode/foto */
            margin: 30px auto;
            border: 10px solid #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .final-frame img {
            width: 100%;
            height: auto;
            max-height: 400px; /* Mencegah gambar terlalu panjang kebawah */
            object-fit: contain; /* Memastikan barcode/foto tidak terpotong */
            border-radius: 10px;
        }

        .floating-heart {
            position: fixed; bottom: -10%; font-size: 20px; color: #e91e63;
            user-select: none; pointer-events: none;
            animation: moveUp 4s linear forwards; z-index: 100;
        }

        @keyframes moveUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        .music-control {
            position: fixed; bottom: 20px; right: 20px; z-index: 1000;
            background: rgba(255, 255, 255, 0.8); padding: 10px;
            border-radius: 50%; cursor: pointer;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <audio id="mySong" loop>
        <source src="Kota ini tak sama tanpamu.mp3" type="audio/mpeg">
    </audio>

    <div class="music-control" onclick="toggleMusic()">üéµ</div>

    <div class="container">
        <div id="page1" class="page-card">
            <h1>üíñ Valentine Surprise üíñ</h1>
            <p>Masukkan namamu untuk melihat kejutan:</p>
            <input type="text" id="nameInput" placeholder="Ketik nama di sini...">
            <br>
            <button onclick="startApp()">Mulai Perjalanan ‚ú®</button>
            <div class="bear-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3cW84azk0NThnODV0NXViZ3N0YjV0cTd2aHN1MTVrYWV5Z3N2NHlhNiZlcD12MV9zdGlja2Vyc19zZWFyY2gmY3Q9cw/QNpeBIyfSJXVL0JmaB/giphy.gif" class="gif-intro" alt="Welcome Bear">
            </div>
        </div>

        <div id="page2" class="hidden page-card">
            <h2 id="greeting">Halo!</h2>
            <p>Ini adalah beberapa kenangan yang kita lalui bersama ü§≠:</p>
            
            <div class="gallery">
                <div class="photo-item" id="photo1">
                    <img src="Gambaran.jpeg" alt="Foto 1">
                    <p class="photo-desc">ini saat kamu menggambarkan untuk aku ‚ò∫Ô∏è</p>
                </div>
                <div class="photo-item hidden" id="photo2">
                    <img src="Sleepcall.jpeg" alt="Foto 2">
                    <p class="photo-desc">saat kita sleepcall üìû</p>
                </div>
                <div class="photo-item hidden" id="photo3">
                    <img src="PP Couple.jpeg" alt="Foto 3">
                    <p class="photo-desc">saat kita couple pp bareng üíó</p>
                </div>
            </div>

            <button id="btnNextPhoto" onclick="showNextPhoto()">Lihat Kenangan Lainnya ‚ú®</button>
            <button id="btnFinishGallery" class="hidden" onclick="nextPage('Message')">Selanjutnya...</button>
        </div>

        <div id="pageMessage" class="hidden page-card">
            <h2 class="animate-text">A Message For You... üíå</h2>
            <div class="message-box animate-text">
                <p id="personalMessage">
                    "Jujur saja aku tidak menyangka sejak pertama kali bertemu denganmu

                    hubungan kita bisa jadi sedekat ini, meski dulu kita berdua juga menemukan

                    tantangan yang terus berganti bahkan masih menghadapi tantangan yang sama,

                    kita berdua tetap memilih untuk bertahan dan tetap berkomunikasi.

                    makasih banyak yaaa kamu dulu sempet menyukaiku terlebih dahulu dan aku juga minta maaf

                    telah menyakitimu beberapa kali. Kurasa aku juga tidak menyesali perasaan yang aku rasakan sekarang terhadapmu.."
                </p>
            </div>
            <div class="bear-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExN3VpNHM0NXBsc3Z1M3ViOXRtd3Y5dDNhdWZ0azY2emVyYjB4bjgxYiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/S2VHDUzW48dwg7y66q/giphy.gif" class="cute-bear">
            </div>
            <button onclick="nextPage(3)">Lanjutkan ‚ù§Ô∏è</button>
        </div>

        <div id="page3" class="hidden page-card">
            <h2 class="animate-text">Coba kamu perhatiin pesan aku yaaa...</h2>
            <div style="font-size: 60px; animation: pulse 1s infinite;" class="animate-text">‚ù§Ô∏è</div>
            <p style="font-size: 24px; font-weight: bold; color: #e91e63;" class="animate-text">
                Karena hari ini adalah hari yang spesial di seluruh dunia, i want to ask you something, will u be my Valentine? üëâüëà
            </p>
            <div class="bear-container animate-text">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExc3Z6M2Zid2tpYzNkYXkxbHN6b2xkc3hpMGRueGdhMm02dXBreGFwcCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/NxC8VtyxqhMtpLoEEN/giphy.gif" class="cute-bear">
            </div>
            <button onclick="showFinalResult('yes')">YES! ü•∞</button>
            <button onclick="showConfirmation()">No.. ü•∫</button>
        </div>

        <div id="pageConfirm" class="hidden page-card">
            <h2>Are u sure? ; (</h2>
            <div class="bear-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXFwb3A1a2U4YTJ3cDg2enBkYWVpOWJ4b2pxmTAxZW1tMmI3dGNvMyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/KOYptxBqx90uW8Z88r/giphy.gif" class="cute-bear">
            </div>
            <button onclick="showFinalResult('no-sure')">Sure</button>
            <button onclick="nextPage(3)">Lemme think again</button>
        </div>

        <div id="resultYes" class="hidden page-card">
            <h1 style="font-size: 40px;">YAAAYYYY! ü•≥üòçü•π</h1>
            <h2 style="color: #e91e63;">I'm so happy you accept my offer! ‚ù§Ô∏è</h2>
            <div class="final-frame">
                <img src="Message for you .png" alt="Barcode Pesan">
                <p style="font-style: italic; color: #e91e63; margin-top: 15px; font-weight: bold;">terdapat pesan dalam barcode itu hehe ‚ú®</p>
            </div>
            <div class="bear-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZDRlbzltcnBzaThzdDVhZzFmb2c5eWx6ZHJ6d25zcHI0enZwbzNqaCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/T70hpBP1L0N7U0jtkq/giphy.gif" class="cute-bear">
            </div>
            <button onclick="reset()">Ulangi Perjalanan</button>
        </div>

        <div id="resultNo" class="hidden page-card">
            <h1 style="font-size: 50px;">üò≠üíî</h1>
            <h2>Yahhh sedikit disayangkan tetapi ini adalah pilihanmu, aku menghargai pilihan kamu üòä</h2>
            <div class="bear-container">
                <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXFwb3A1a2U4YTJ3cDg2enBkYWVpOWJ4b2pxmTAxZW1tMmI3dGNvMyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/b5z9pHJxxcREI/giphy.gif" class="cute-bear">
            </div>
            <button onclick="reset()">Ulangi</button>
        </div>
    </div>

    <script>
        const song = document.getElementById("mySong");
        song.volume = 0.15; 
        
        let currentPhotoIndex = 1;

        function startApp() {
            song.play(); 
            nextPage(2);
        }

        function toggleMusic() {
            if (song.paused) song.play(); else song.pause();
        }

        function showNextPhoto() {
            currentPhotoIndex++;
            const nextPhoto = document.getElementById('photo' + currentPhotoIndex);
            if (nextPhoto) {
                nextPhoto.classList.remove('hidden');
                if (currentPhotoIndex === 3) {
                    document.getElementById('btnNextPhoto').classList.add('hidden');
                    document.getElementById('btnFinishGallery').classList.remove('hidden');
                }
            }
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('floating-heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            const duration = Math.random() * 3 + 3;
            heart.style.animationDuration = duration + 's';
            document.body.appendChild(heart);
            setTimeout(() => { heart.remove(); }, duration * 1000);
        }
        setInterval(createHeart, 300);

        function hideAll() {
            const ids = ['page1', 'page2', 'pageMessage', 'page3', 'pageConfirm', 'resultYes', 'resultNo'];
            ids.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.classList.add('hidden');
            });
            window.scrollTo(0, 0);
        }

        function nextPage(pageIdentifier) {
            hideAll();
            const targetPage = document.getElementById('page' + pageIdentifier);
            if (targetPage) {
                targetPage.classList.remove('hidden');
                
                const animatedElements = targetPage.querySelectorAll('.animate-text');
                animatedElements.forEach(el => {
                    el.style.animation = 'none';
                    el.offsetHeight; 
                    el.style.animation = null;
                });
            }
            
            const name = document.getElementById('nameInput').value || 'Sayang';
            if (pageIdentifier === 2) {
                document.getElementById('greeting').innerText = `Halo, ${name}!`;
                currentPhotoIndex = 1;
                document.getElementById('photo2').classList.add('hidden');
                document.getElementById('photo3').classList.add('hidden');
                document.getElementById('btnNextPhoto').classList.remove('hidden');
                document.getElementById('btnFinishGallery').classList.add('hidden');
            }
        }

        function showConfirmation() {
            hideAll();
            document.getElementById('pageConfirm').classList.remove('hidden');
        }

        function showFinalResult(type) {
            hideAll();
            if (type === 'yes') {
                document.getElementById('resultYes').classList.remove('hidden');
            } else {
                document.getElementById('resultNo').classList.remove('hidden');
            }
        }

        function reset() {
            document.getElementById('nameInput').value = '';
            nextPage(1);
        }
    </script>
</body>

</html>
